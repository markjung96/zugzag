"use strict";(self.webpackChunkzugzag=self.webpackChunkzugzag||[]).push([[499,760],{760:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});s(662);var a=s(550);const n=()=>(0,a.jsx)("div",{children:"GatheringItemPage"})},499:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(662),n=s(827);const r={"2024-12-01":[{id:"meet-1",hostId:"user-1",status:"upcoming",meetingName:"\ud1a0\uc694\uc77c \uc544\uce68 \ud074\ub77c\uc774\ubc0d",climbingGym:"\ud074\ub77c\uc774\ubc0d \ud30c\ud06c",date:new Date("2024-12-01T09:00:00"),isCrewMeeting:!1,maxParticipants:6,attendance:{undecided:["\uae40\ubbf8\uc815","\uc774\uc218\uc9c4"],confirmed:["\ubc15\uc9c0\ud6c8","\ucd5c\uc601\ud76c","\uc815\ubbfc\uc6b0"]}}],"2024-12-03":[{id:"meet-2",hostId:"user-2",status:"upcoming",meetingName:"\ud06c\ub8e8 \uc815\uae30 \ubaa8\uc784",climbingGym:"\ub354\ud074\ub77c\uc784",date:new Date("2024-12-03T19:00:00"),isCrewMeeting:!0,maxParticipants:null,attendance:{undecided:["\ud669\ubbfc\uc9c0","\uace0\ub3d9\uc6b1","\uc774\uc218\uc9c4"],confirmed:["\uae40\ud0dc\ud76c","\ubc15\uc9c0\uc131","\uc774\ubbfc\ud638","\uc815\uc720\ubbf8","\uac15\ub3d9\uc6d0"]}},{id:"meet-3",hostId:"user-3",status:"upcoming",meetingName:"\ucd08\ubcf4\uc790 \ud074\ub77c\uc774\ubc0d",climbingGym:"\ub354\ud074\ub77c\uc784",date:new Date("2024-12-03T15:00:00"),isCrewMeeting:!1,maxParticipants:4,attendance:{undecided:["\uc2e0\ubcf4\ub77c"],confirmed:["\uae40\ucd08\ubcf4","\uc774\uc2dc\uc791"]}}],"2024-12-07":[{id:"meet-4",hostId:"user-4",status:"upcoming",meetingName:"\ubcfc\ub354\ub9c1 \uc2a4\ud130\ub514",climbingGym:"\ud074\ub77c\uc774\ubc0d \ub7a9",date:new Date("2024-12-07T14:00:00"),isCrewMeeting:!1,maxParticipants:8,attendance:{undecided:["\ubc15\uc11c\uc900","\uae40\uc6b0\uc9c4"],confirmed:["\uc774\ub3c4\ud604","\uc815\ud574\uc778","\ubc30\uc218\uc9c0","\uae40\uc0c8\ub860"]}}],"2024-12-10":[{id:"meet-5",hostId:"user-5",status:"upcoming",meetingName:"\ud06c\ub8e8 \ub300\ud68c \uc900\ube44",climbingGym:"\ud074\ub77c\uc774\ubc0d \ud30c\ud06c",date:new Date("2024-12-10T18:00:00"),isCrewMeeting:!0,maxParticipants:null,attendance:{undecided:["\uae40\uc5f0\uc544","\uc774\uc2b9\uae30"],confirmed:["\ubc15\ud0dc\ud658","\uc190\ud765\ubbfc","\uae40\uc5f0\uacbd","\uc774\uac15\uc778"]}}],"2024-12-15":[{id:"meet-6",hostId:"user-6",status:"upcoming",meetingName:"\uc8fc\ub9d0 \ud074\ub77c\uc774\ubc0d",climbingGym:"\ub354\ud074\ub77c\uc784",date:new Date("2024-12-15T11:00:00"),isCrewMeeting:!1,maxParticipants:5,attendance:{undecided:["\uc815\uc6b0\uc131"],confirmed:["\ud55c\ud6a8\uc8fc","\uc1a1\uc911\uae30","\ubc15\ubcf4\uc601"]}}],"2024-12-20":[{id:"meet-7",hostId:"user-7",status:"upcoming",meetingName:"\ud06c\ub8e8 \uc1a1\ub144\ud68c",climbingGym:"\ud074\ub77c\uc774\ubc0d \ub7a9",date:new Date("2024-12-20T19:00:00"),isCrewMeeting:!0,maxParticipants:null,attendance:{undecided:["\uae40\ud0dc\ub9ac","\ub958\uc900\uc5f4","\ubc15\ubcf4\uac80"],confirmed:["\uc1a1\uac15\ud638","\uc804\uc9c0\ud604","\uc774\ubcd1\ud5cc","\uae40\ud61c\uc218","\ud558\uc815\uc6b0","\uc190\uc608\uc9c4"]}}]};var i=s(849),l=s(975),d=s(762),c=s(973),o=s(550);const m=e=>{let{onDateSelect:t,meetings:s={}}=e;const[n,r]=(0,a.useState)(new Date),[m,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(null),[x,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(0),f=(0,a.useRef)(null),j=(0,a.useCallback)((e=>{const t=e.getFullYear(),s=e.getMonth(),a=new Date(t,s,1),n=new Date(t,s+1,0),r=a.getDay(),i=n.getDate(),l=[];for(let c=0;c<r;c++){const e=new Date(t,s,-r+c+1);l.push({date:e,isCurrentMonth:!1})}for(let c=1;c<=i;c++)l.push({date:new Date(t,s,c),isCurrentMonth:!0});const d=42-l.length;for(let c=1;c<=d;c++)l.push({date:new Date(t,s+1,c),isCurrentMonth:!1});return l}),[]),w=e=>{0===b&&(y(-e),setTimeout((()=>{r((t=>(0,i.P)(t,e))),y(0)}),300))},v=e=>({transform:`translateX(${-100*e+(()=>{if(!g)return 0!==b?b*window.innerWidth:0;const e=g.currentX-g.startX,t=window.innerWidth;return Math.max(Math.min(e,t),-t)})()/window.innerWidth*100}%)`,transition:null===g&&0!==b?"transform 300ms ease-out":"none"}),N=e=>(0,o.jsx)("div",{className:"grid grid-cols-7 gap-1",children:e.map(((e,a)=>{const n=m&&e.date.toDateString()===m.toDateString(),r=(e=>{const t=(0,l.GP)(e,"yyyy-MM-dd");return s[t]&&s[t].length>0})(e.date),i=(0,l.GP)(e.date,"yyyy-MM-dd");return(0,o.jsxs)("button",{className:`\n                aspect-square p-1 text-center relative transition-colors\n                ${e.isCurrentMonth?"dark:text-white text-gray-800":"dark:text-gray-500 text-gray-400"}\n                ${n?"dark:bg-blue-900 bg-blue-100 rounded-full":"dark:hover:bg-gray-700 hover:bg-gray-100"}\n                active:bg-blue-200\n                touch-manipulation\n              `,onClick:()=>{return s=e.date,void(x||(m&&s.toDateString()===m.toDateString()?(u(null),t&&t(null)):(u(s),t&&t(s))));var s},children:[(0,o.jsx)("span",{className:"text-sm",children:e.date.getDate()}),r&&(0,o.jsx)("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 flex gap-1",children:s[i].map(((e,t)=>(0,o.jsx)("div",{className:"w-1 h-1 rounded-full bg-primary"},t)))})]},a)}))}),C=j((0,i.P)(n,-1)),k=j(n),M=j((0,i.P)(n,1));return(0,o.jsxs)("div",{className:"w-full mx-auto rounded-lg p-4 transition-colors duration-200 overflow-hidden dark:bg-gray-800 bg-white dark:text-white text-gray-800",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("button",{className:"p-2 rounded-full transition-colors dark:hover:bg-gray-700 hover:bg-gray-100  dark:text-gray-200 text-gray-600",onClick:()=>w(-1),disabled:0!==b,children:(0,o.jsx)(d.A,{className:"w-6 h-6"})}),(0,o.jsxs)("h2",{className:"text-lg font-semibold",children:[n.getFullYear(),"\ub144 ",n.getMonth()+1,"\uc6d4"]}),(0,o.jsx)("button",{className:"p-2 rounded-full transition-colors dark:hover:bg-gray-700 hover:bg-gray-100 dark:text-gray-200 text-gray-600",onClick:()=>w(1),disabled:0!==b,children:(0,o.jsx)(c.A,{className:"w-6 h-6"})})]}),(0,o.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e=>(0,o.jsx)("div",{className:"text-center text-sm font-medium py-2 dark:text-gray-300 text-gray-600",children:e},e)))}),(0,o.jsx)("div",{className:"relative overflow-hidden",children:(0,o.jsxs)("div",{ref:f,className:"relative w-full select-none touch-pan-x",style:{height:"360px"},onTouchStart:e=>{0===b&&(h({startX:e.touches[0].clientX,currentX:e.touches[0].clientX}),p(!0))},onTouchMove:e=>{g&&0===b&&h((t=>({...t,currentX:e.touches[0].clientX})))},onTouchEnd:()=>{if(!g)return;const e=g.currentX-g.startX,t=.3*window.innerWidth;if(Math.abs(e)>t){const t=e>0?-1:1;y(-t),setTimeout((()=>{r((e=>(0,i.P)(e,t))),y(0)}),300)}h(null),p(!1)},children:[(0,o.jsx)("div",{className:"absolute w-full",style:v(1),children:N(C)}),(0,o.jsx)("div",{className:"absolute w-full",style:v(0),children:N(k)}),(0,o.jsx)("div",{className:"absolute w-full",style:v(-1),children:N(M)})]})})]})},u=e=>{let{className:t="",orientation:s="horizontal",children:a}=e;return a?(0,o.jsxs)("div",{className:`relative w-full my-4 ${t}`,children:[(0,o.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,o.jsx)("span",{className:"w-full border-t border-border"})}),(0,o.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,o.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:a})})]}):(0,o.jsx)("div",{className:`\n        ${"horizontal"===s?"w-full h-[1px] my-4":"h-full w-[1px] mx-4"}\n        bg-border\n        ${t}\n      `,role:"separator","aria-orientation":s})};var g=s(986),h=s(155),x=s(581),p=s(485),b=s(402),y=s(889);const f=e=>{let{meetings:t,onFiltersChange:s,meetingId:n,onCreateMeeting:r}=e;const[i,l]=a.useState({gyms:[],showCrewOnly:!1,showAvailableOnly:!1}),d=a.useMemo((()=>{const e=new Set;return Object.values(t).forEach((t=>{t.forEach((t=>{e.add(t.climbingGym)}))})),Array.from(e)}),[t]),c=e=>{const t={...i,[e]:!i[e]};l(t),s(t)};return(0,o.jsxs)("div",{className:"w-full space-y-4",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,o.jsxs)("select",{className:"px-3 py-2 rounded-md border border-gray-300 bg-white",onChange:e=>{const t=e.target.value;if(t&&!i.gyms.includes(t)){const e={...i,gyms:[...i.gyms,t]};l(e),s(e)}},value:"",children:[(0,o.jsx)("option",{value:"",children:"\ud074\ub77c\uc774\ubc0d\uc7a5 \uc120\ud0dd"}),d.map((e=>(0,o.jsx)("option",{value:e,disabled:i.gyms.includes(e),children:e},e)))]}),(0,o.jsxs)("label",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:i.showCrewOnly,onChange:()=>c("showCrewOnly"),className:"rounded border-gray-300"}),(0,o.jsx)("span",{className:"text-sm",children:"\ud06c\ub8e8 \ubaa8\uc784\ub9cc \ubcf4\uae30"})]}),(0,o.jsxs)("label",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:i.showAvailableOnly,onChange:()=>c("showAvailableOnly"),className:"rounded border-gray-300"}),(0,o.jsx)("span",{className:"text-sm",children:"\ucc38\uc5ec \uac00\ub2a5\ud55c \ubaa8\uc784\ub9cc \ubcf4\uae30"})]})]}),(0,o.jsx)("button",{onClick:()=>{n&&r&&(r(n),window.location.href=`/gather-here?id=${n}`)},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:"\ubaa8\uc784 \ub9cc\ub4e4\uae30"})]}),(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:i.gyms.map((e=>(0,o.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gray-100 text-sm",children:[e,(0,o.jsx)("button",{onClick:()=>(e=>{const t={...i,gyms:i.gyms.filter((t=>t!==e))};l(t),s(t)})(e),className:"hover:text-gray-700",children:(0,o.jsx)(y.A,{className:"h-4 w-4"})})]},e)))})]})},j=e=>{let{meetings:t,selectedDate:s}=e;const r=(0,n.Zp)(),[i,d]=(0,a.useState)(t),[c,m]=(0,a.useState)({gyms:[],showCrewOnly:!1,showAvailableOnly:!1}),u=(()=>{let e={...i};if(s){const t=(0,l.GP)(s,"yyyy-MM-dd");e={[t]:e[t]||[]}}return Object.entries(e).reduce(((e,t)=>{let[s,a]=t;const n=a.filter((e=>{if(c.gyms.length>0&&!c.gyms.includes(e.climbingGym))return!1;if(c.showCrewOnly&&!e.isCrewMeeting)return!1;if(c.showAvailableOnly){if(null!==e.maxParticipants&&e.attendance.confirmed.length>=e.maxParticipants)return!1}return!0}));return n.length>0&&(e[s]=n),e}),{})})(),y=0===Object.keys(u).length;return console.log("isEmpty",y),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(f,{meetings:i,onFiltersChange:e=>{m(e)}}),(0,o.jsx)(b.JY,{onDragEnd:e=>{const{source:t,destination:s}=e;if(s)if(t.droppableId===s.droppableId){const e=t.droppableId,a=Array.from(i[e]),[n]=a.splice(t.index,1);a.splice(s.index,0,n),d({...i,[e]:a})}else{const e=t.droppableId,a=s.droppableId,n=Array.from(i[e]),r=Array.from(i[a]||[]),[c]=n.splice(t.index,1),o={...c,date:new Date(a+"T"+(0,l.GP)(c.date,"HH:mm:ss"))};r.splice(s.index,0,o),d({...i,[e]:n,[a]:r})}},children:(0,o.jsx)("div",{className:"space-y-4",children:y?(0,o.jsx)("div",{className:"rounded-lg border border-border bg-card p-8",children:(0,o.jsx)("div",{className:"flex flex-col items-center justify-center text-center space-y-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("h3",{className:"font-medium text-lg",children:"\ub4f1\ub85d\ub41c \ubaa8\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,o.jsx)("p",{className:"text-sm text-muted-foreground",children:s?"\uc120\ud0dd\ud558\uc2e0 \ub0a0\uc9dc\uc5d0 \ub4f1\ub85d\ub41c \ubaa8\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.":"\uc544\uc9c1 \ub4f1\ub85d\ub41c \ubaa8\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \ubaa8\uc784\uc744 \ub9cc\ub4e4\uc5b4\ubcf4\uc138\uc694!"})]})})}):Object.entries(u).map((e=>{let[t,s]=e;return(0,o.jsxs)("div",{className:"rounded-lg border border-border bg-card",children:[(0,o.jsx)("div",{className:"px-4 py-2 border-b border-border bg-muted",children:(0,o.jsx)("h3",{className:"font-medium",children:(0,l.GP)(new Date(t),"M\uc6d4 d\uc77c (EEEE)",{locale:g.ko})})}),(0,o.jsx)(b.gL,{droppableId:t,children:e=>(0,o.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"p-2 space-y-2",children:[s.map(((e,t)=>(0,o.jsx)(b.sx,{draggableId:e.meetingName+e.date.toString(),index:t,children:t=>(0,o.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"p-3 rounded-md bg-background border border-border hover:border-primary transition-colors cursor-pointer",onClick:()=>{return t=e.id,void r(`/gather-here/${t}`);var t},children:(0,o.jsx)("div",{className:"flex items-start justify-between",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("h4",{className:"font-medium",children:[e.meetingName,e.isCrewMeeting&&(0,o.jsx)("span",{className:"ml-2 inline-flex items-center rounded-full bg-primary/10 px-2 py-1 text-xs font-medium text-primary",children:"\ud06c\ub8e8"})]}),(0,o.jsxs)("div",{className:"mt-1 space-y-1 text-sm text-muted-foreground",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(h.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:(0,l.GP)(e.date,"a h:mm",{locale:g.ko})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(x.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{children:e.climbingGym})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(p.A,{className:"h-4 w-4"}),(0,o.jsxs)("span",{children:["\ucc38\uc11d ",e.attendance.confirmed.length,"\uba85",e.maxParticipants&&` / ${e.maxParticipants}\uba85`]})]})]})]})})})},e.meetingName+e.date.toString()))),e.placeholder]})})]},t)}))})})]})};var w=s(760);const v=()=>{const{id:e}=(0,n.g)(),[t,s]=(0,a.useState)(null);return e?(0,o.jsx)(w.default,{}):(0,o.jsxs)("div",{children:[(0,o.jsx)(m,{onDateSelect:e=>{s(e)},meetings:r}),(0,o.jsx)(u,{children:"\ubaa8\uc784 \ubaa9\ub85d"}),(0,o.jsx)(j,{meetings:r,selectedDate:t})]})}}}]);